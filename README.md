# Team 6ixSense -osulloc Clone coding - refactoring

## 프로젝트 개요

### 오설록 사이트 분석

🍵 **[Producting]**

1. 오설록은 제주특별자치도에 본사를 둔 대한민국의 차업체이며, 대표적인 브랜드 중 하나입니다.
2. 다양한 차와 차 관련 상품들을 판매하고 있으며, 특히 제주도에서 직접 재배한 녹차가 유명합니다.
3. 신선한 녹차 외에도 다양한 녹차 기반 제품들(녹차 초콜릿, 녹차 아이스크림 등)을 판매하며, 차 문화를 널리 알리고 있습니다.
4. 또한, 오설록은 제주의 아름다운 자연을 체험할 수 있는 티 뮤지엄을 운영하고 있어, 브랜드 체험 및 차문화 확산에 크게 기여하고 있습니다.
5. 웹 및 모바일 서비스
   1. 제품 구매를 위한 웹페이지를 제작하고 있으며, 이를 통해 각종 제품 정보와 구매 서비스를 제공합니다.
   2. 네비게이션바에서 "제품"을 중심으로 각 분야별 상품들을 확인할 수 있게 제작되어 있으며, 웹사이트 내 검색 기능을 통해 원하는 제품을 쉽게 찾을 수 있습니다.

👤 **[End-User]**

6. 차를 즐기는 모든 고객
   1. 녹차를 포함한 다양한 차를 선호하는 고객
   2. 제주도 특산품을 선호하고, 선물을 구매하는 고객
   3. 새로운 차문화를 체험하고, 차에 대한 지식을 넓히고 싶은 고객
   4. 차 관련 상품을 선호하는 고객

해당 오설록 사이트에 대한 분석으로 인센스 이키머서를 제작 하였습니다.

### 식스센스 사이트 분석

🕯️ **[Producting]**

1. 식스센스 사이트는 다양한 인센스 제품을 판매하는 온라인 플랫폼입니다.
2. 오설록을 참고하여, 다양한 향의 인센스와 관련 용품들을 선보입니다. 고객의 취향에 따라 다양한 향을 선택할 수 있도록 하며, 제품에 대한 설명과 향에 대한 자세한 정보를 제공합니다.
3. 웹 및 모바일 서비스
   1. 제품 구매를 위한 웹페이지를 제작하며, 각종 제품 정보와 구매 서비스를 제공합니다.

👤 **[End-User]**

1. 인센스를 즐기는 모든 고객
   1. 다양한 향의 인센스를 선호하는 고객
   2. 자신만의 공간을 아로마로 꾸미고 싶어하는 고객
   3. 새로운 인센스 문화를 체험하고, 인센스에 대한 지식을 넓히고 싶은 고객
   4. 인센스 관련 상품을 선호하는 고객
   5. 인센스 상품을 선물을 하고 싶어하는 고객

<br />
프로젝트 기간: 2023.04.03 ~ 2023.04.14

## FrontEnd

- <a href="https://github.com/Hyomins-013">신효민<img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white&link=https://github.com/hongyeollee"/></a>
- <a href="https://github.com/alchogh">조건호<img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white&link=https://github.com/hongyeollee"/></a>
- <a href="https://github.com/Hyoster">박효성<img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white&link=https://github.com/hongyeollee"/></a>

<br />

## BackEnd

- <a href="https://github.com/parkseyik">박세익 <img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white&link=https://github.com/minseoya"/></a>
- <a href="https://github.com/thornewater">김원종<img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white&link=https://github.com/lsg622"/></a>
- <a href="https://github.com/songsong95">송석준<img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white&link=https://github.com/Dongrang072"/></a>

<br/>

<div align=center><h1>📚 STACKS</h1></div>

<div align=center>

  <img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white"> 
  <img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white"> 
  <img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">
  <br>
  <img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white"> 
  <img src="https://img.shields.io/badge/.ENV-ECD53F?style=for-the-badge&logo=.ENV&logoColor=black">
  <img src="https://img.shields.io/badge/node.js-339933?style=for-the-badge&logo=Node.js&logoColor=white">
  <img src="https://img.shields.io/badge/express-000000?style=for-the-badge&logo=express&logoColor=white">
  <img src="https://img.shields.io/badge/nestjs-E0234E?style=for-the-badge&logo=nestjs&logoColor=black"> 
  <img src="https://img.shields.io/badge/swagger-85EA2D?style=for-the-sbadge&logo=swagger&logoColor=black"> 
  <img src="https://img.shields.io/badge/Postman-FF6C37?style=for-the-badge&logo=Postman&logoColor=white">
  <img src="https://img.shields.io/badge/amazonaws-232F3E?style=for-the-badge&logo=amazonaws&logoColor=white">
  <img src="https://img.shields.io/badge/amazonec2-FF9900?style=for-the-badge&logo=amazonec2&logoColor=white">
  <img src="https://img.shields.io/badge/docker-2496ED?style=for-the-badge&logo=docker&logoColor=white">
  <br>
  <img src="https://img.shields.io/badge/trello-61DAFB?style=for-the-badge&logo=trello&logoColor=black"> 
  <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">
  <img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white">
  <img src="https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=Slack&logoColor=white">

  </div>


# 오설록 - 클론 코딩 프로젝트 - 리팩토링 진행

1. 회원가입, 로그인 , 인증
2. productList 페이지네이션, 상품 필터링
3. productDetailPage 페이지네이션
4. 장바구니 CRUD API
5. 주문 API

Type 확인에는 Nestia를 사용하였습니다.

- 이전의 NestJs에서는 class-validator를 사용했지만, Nestia는 class-validator보다 약 20,000배 빠릅니다.
- Swagger 문서 자동화를 통해 가독성이 좋은 코드를 생성할 수 있습니다.
- 출처 - [Nestia 공식 문서](https://nestia.io/docs/)

swagger문서화

- https://app.swaggerhub.com/apis/ASDQWE747/1st-project_re/0.0.1#/products/get_products__productId_

<br/>

# 회원가입, 로그인 , 인증

![signup](https://user-images.githubusercontent.com/123849268/232360555-3188c6df-31dc-4627-9717-161ac49a2c35.gif)
![logingif](https://user-images.githubusercontent.com/123849268/232360579-23392ced-1c12-43a8-9980-806d6a6e4270.gif)

## 구현 목표

회원가입 구현

## 구현 사항 설명

- 클라이언트로부터 이름, 계정, 비밀번호, 전화번호, 생일, 성별이 입력된다면, 회원가입이 가능하도록 구현하였습니다.
  - 계정: 4~12자의 영문 및 숫자
  - 비밀번호: 8~16자의 영문, 숫자 및 특수문자가 포함되어야 합니다.
  - 비밀번호는 Argon2를 사용하여 암호화되며, 이 암호화된 값이 사용자 테이블에 입력됩니다.

왜 bcrypt가 아닌 Argon2를 사용한 사유

- Argon2는 bcrypt에 비해 상대적으로 최신의 알고리즘
- Argon2는 비밀번호를 해싱하는데 사용할 수 있는 CPU와 메모리의 양을 조절함으로써 시스템에 가용한 리소스에 따라 보안성을 최적화 가능

<br/>

# productList 페이지네이션, 상품 필터링

![main_2 (1)](https://user-images.githubusercontent.com/123849268/232360878-481bf06a-b1a6-46bf-a0dd-bdd46126256b.gif)
![listgif](https://user-images.githubusercontent.com/123849268/232360953-d8050f34-fbae-4f7a-97a3-cad522116124.gif)

## 구현 목표

페이지 네이션 및 필터링기능추가

## 구현 사항 설명

- 기존의 RawQuery형태를 createQueryBuilder로 변경

1. 메인 페이지의 오늘의 추천 상품에 추천상품과 할인된 가격의 데이터를 만들어 Client가 받을 수 있게 연결
2. 상품의 가격을 정렬하여 낮은 가격순, 높은 가격순으로 선택할 수 있는 api구현
3. 상품의 카테고리별로 필터링하여 상품을 선택할 수 있도록 구현
4. 상품 이미지를 선택할 시 Product Image와 Hover Image를 함께 제공하기 위해, 상품 정보에 2개의 이미지 URL을 추가하고 클라이언트 측에서 이를 구현
5. LIMIT와 OFFSET으로 페이지네이션을 적용하여 페이지 이동 구현
6. 상품 가격 외 할인된 가격도 함께 계산 할 수 있도록 쿼리문에서 조건문을 사용하여 구현

<br>

# productDetailPage 페이지네이션

![상품 디테일 (1)](https://user-images.githubusercontent.com/120084509/232380947-5492f3c1-cae6-4177-9572-ad3a87a75dd6.gif)

## 구현 목표

페이지 네이션 및 필터링기능추가

## 구현 사항 설명

- 기존의 RawQuery형태를 createQueryBuilder로 변경

1. 상품들의 가격들 중 할인이 있는 상품이 있다면 할인율과 함께 할인이 적용된 가격을 클라이언트에게 반환
2. 상품 상세페이지인 만큼 상품의 이름부터 시작해서 가격, 정보, 이미지 등 데이터베이스에 있는 정보들을 클라이언트로 반환

<br>

# 장바구니 CRUD API

![장바구니_선택체크 (1)](https://user-images.githubusercontent.com/120084509/232398090-45afe96d-5677-433b-b32d-108bfd3b014b.gif)

![장바구니_전체선택_삭제 (1)](https://user-images.githubusercontent.com/120084509/232398104-2d7794ae-551d-425a-8b3b-b6d3338fe754.gif)

![장바구니_선택삭제 (1)](https://user-images.githubusercontent.com/120084509/232398127-d1e0a226-254e-49c0-834c-a34916ae5d8c.gif)

## 구현 목표

장바구니 CRUD 기능 추가

## 구현 사항 설명

1. JWT토큰을 활용하여 인증된 사용자만이 서비스를 이용할 수 있게 구현
2. 사용자가 구매를 원하는 상품을 효율적으로 관리 할수 있도록 CRUD기능구현
3. 장바구니에 물품 추가 시에 장바구니 내에 동일한 상품이 있다면, 새로 추가하는 장바구니 제품의 수량만 변경될 수 있도록 구현하여 사용자들의 편의성 증대
4. 장바구니 상품이 부분 선택하여 삭제 및 수량 업데이트 시에도 DB 내에서 반영할 수 있도록 구현

<br>

# 주문 & 결제 API

![ezgif com-gif-maker (3)](https://user-images.githubusercontent.com/120084509/232380925-f400bdf0-0a9f-4b70-8756-7ecf1d38eec1.gif)

## 구현 목표

주문 & 결제 기능 추가

## 구현 사항 설명

1. JWT토큰을 활용하여 인증된 사용자만이 서비스를 이용할 수 있게 구현
2. 결제 시스템을 사용자가 보유한 포인트에서 구매하려는 상품의 총 가격 만큼 차감하는 방식을 선택해 그것을 고려하여 기능 구현
3. 만약 사용자의 현재 보유 포인트 보다 구매하려는 상품의 가격이 크다면 오류를 반환
4. 우리팀은 장바구니 단계에서 사용자가 담은 장바구니 전체 구매가 아닌 선택 구매를 할 수 있기 때문에 사용자가 구매한 상품만 장바구니 정보에서 삭제할 수 있도록 구현
